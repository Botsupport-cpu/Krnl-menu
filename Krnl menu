local UIS = game:GetService("UserInputService")
local CoreGui = game:GetService("CoreGui")
local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")

-- –ü–ï–†–ï–ú–ï–ù–ù–´–ï --
local mainGui, speedGui
local dragStart, startPos

-- –§–£–ù–ö–¶–ò–Ø –£–í–ï–î–û–ú–õ–ï–ù–ò–ô --
local function ShowNotification(message, color)
    local notify = Instance.new("ScreenGui")
    notify.Name = "Notification"
    notify.Parent = CoreGui

    local frame = Instance.new("Frame")
    frame.Size = UDim2.new(0.6, 0, 0.08, 0)
    frame.Position = UDim2.new(0.2, 0, 0.1, 0)
    frame.BackgroundColor3 = color or Color3.fromRGB(0, 170, 0)
    frame.BorderSizePixel = 0

    local label = Instance.new("TextLabel")
    label.Text = message
    label.Size = UDim2.new(1, 0, 1, 0)
    label.BackgroundTransparency = 1
    label.TextColor3 = Color3.new(1, 1, 1)
    label.Font = Enum.Font.GothamBold
    label.TextScaled = true
    label.Parent = frame
    frame.Parent = notify

    -- –ê–ù–ò–ú–ê–¶–ò–Ø
    frame.Position = UDim2.new(0.2, 0, -0.1, 0)
    local tweenIn = TweenService:Create(
        frame,
        TweenInfo.new(0.5),
        {Position = UDim2.new(0.2, 0, 0.1, 0)}
    )
    tweenIn:Play()

    task.delay(3, function()
        local tweenOut = TweenService:Create(
            frame,
            TweenInfo.new(0.5),
            {Position = UDim2.new(0.2, 0, -0.1, 0)}
        )
        tweenOut:Play()
        tweenOut.Completed:Connect(function()
            notify:Destroy()
        end)
    end)
end

-- –ü–ï–†–ï–¢–ê–°–ö–ò–í–ê–ù–ò–ï –î–õ–Ø –¢–ï–õ–ï–§–û–ù–ê --
local function EnableMobileDrag(frame)
    local touchStartPos, frameStartPos
    
    frame.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            touchStartPos = input.Position
            frameStartPos = frame.Position
        end
    end)
    
    frame.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            local touch = input
            touch.Changed:Connect(function()
                if touch.UserInputState == Enum.UserInputState.Change then
                    local delta = touch.Position - touchStartPos
                    frame.Position = UDim2.new(
                        frameStartPos.X.Scale, 
                        frameStartPos.X.Offset + delta.X,
                        frameStartPos.Y.Scale, 
                        frameStartPos.Y.Offset + delta.Y
                    )
                end
            end)
        end
    end)
end

-- –ì–õ–ê–í–ù–û–ï –ú–ï–ù–Æ --
local function CreateMainMenu()
    local gui = Instance.new("ScreenGui")
    gui.Name = "Mobile_KRNL_Menu"
    gui.ResetOnSpawn = false
    gui.Parent = CoreGui

    local mainFrame = Instance.new("Frame")
    mainFrame.Size = UDim2.new(0.8, 0, 0.5, 0) -- –ë–æ–ª—å—à–µ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    mainFrame.Position = UDim2.new(0.1, 0, 0.25, 0)
    mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    mainFrame.Active = true
    mainFrame.Draggable = false

    -- –ó–ê–ì–û–õ–û–í–û–ö (–æ–±–ª–∞—Å—Ç—å –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è)
    local dragArea = Instance.new("TextLabel")
    dragArea.Text = "‚â° KRNL MENU (—Ç–∞—â–∏—Ç–µ –∑–¥–µ—Å—å) ‚â°"
    dragArea.Size = UDim2.new(1, 0, 0.15, 0)
    dragArea.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
    dragArea.TextColor3 = Color3.new(1, 0, 0)
    dragArea.Font = Enum.Font.GothamBold
    dragArea.TextScaled = true

    -- –ü–û–õ–ï –í–í–û–î–ê
    local textBox = Instance.new("TextBox")
    textBox.PlaceholderText = "–í–≤–µ–¥–∏—Ç–µ Lua —Å–∫—Ä–∏–ø—Ç –∑–¥–µ—Å—å..."
    textBox.Size = UDim2.new(0.9, 0, 0.5, 0)
    textBox.Position = UDim2.new(0.05, 0, 0.2, 0)
    textBox.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
    textBox.TextColor3 = Color3.new(1, 1, 1)
    textBox.TextXAlignment = Enum.TextXAlignment.Left
    textBox.TextYAlignment = Enum.TextYAlignment.Top
    textBox.MultiLine = true
    textBox.TextWrapped = true
    textBox.Font = Enum.Font.SourceSans
    textBox.TextSize = 14

    -- –ö–ù–û–ü–ö–ò (–±–æ–ª—å—à–µ –¥–ª—è —Å–µ–Ω—Å–æ—Ä–∞)
    local executeBtn = Instance.new("TextButton")
    executeBtn.Text = "‚ñ∂ –í–´–ü–û–õ–ù–ò–¢–¨"
    executeBtn.Size = UDim2.new(0.4, 0, 0.15, 0)
    executeBtn.Position = UDim2.new(0.05, 0, 0.75, 0)
    executeBtn.BackgroundColor3 = Color3.fromRGB(0, 170, 0)
    executeBtn.TextColor3 = Color3.new(1, 1, 1)
    executeBtn.Font = Enum.Font.GothamBold
    executeBtn.TextScaled = true

    local speedBtn = Instance.new("TextButton")
    speedBtn.Text = "‚ö° –°–ö–û–†–û–°–¢–¨"
    speedBtn.Size = UDim2.new(0.4, 0, 0.15, 0)
    speedBtn.Position = UDim2.new(0.55, 0, 0.75, 0)
    speedBtn.BackgroundColor3 = Color3.fromRGB(0, 100, 200)
    speedBtn.TextColor3 = Color3.new(1, 1, 1)
    speedBtn.Font = Enum.Font.GothamBold
    speedBtn.TextScaled = true

    -- –°–ë–û–†–ö–ê
    dragArea.Parent = mainFrame
    textBox.Parent = mainFrame
    executeBtn.Parent = mainFrame
    speedBtn.Parent = mainFrame
    mainFrame.Parent = gui

    -- –í–ö–õ–Æ–ß–ê–ï–ú –ü–ï–†–ï–¢–ê–°–ö–ò–í–ê–ù–ò–ï
    EnableMobileDrag(dragArea)

    -- –§–£–ù–ö–¶–ò–û–ù–ê–õ
    executeBtn.MouseButton1Click:Connect(function()
        local script = textBox.Text
        if script and script ~= "" then
            local success, error = pcall(function()
                loadstring(script)()
            end)
            
            if success then
                ShowNotification("‚úÖ –£—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ!", Color3.fromRGB(0, 170, 0))
            else
                ShowNotification("‚ùå –û—à–∏–±–∫–∞: " .. tostring(error), Color3.fromRGB(170, 0, 0))
            end
        else
            ShowNotification("‚ö†Ô∏è –í–≤–µ–¥–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç!", Color3.fromRGB(200, 200, 0))
        end
    end)

    speedBtn.MouseButton1Click:Connect(function()
        if speedGui then
            speedGui.Enabled = not speedGui.Enabled
        else
            CreateSpeedMenu()
        end
    end)

    return gui
end

-- –ú–ï–ù–Æ –°–ö–û–†–û–°–¢–ò –î–õ–Ø –¢–ï–õ–ï–§–û–ù–ê --
local function CreateSpeedMenu()
    local gui = Instance.new("ScreenGui")
    gui.Name = "Mobile_Speed_Menu"
    gui.ResetOnSpawn = false
    gui.Parent = CoreGui

    local speedFrame = Instance.new("Frame")
    speedFrame.Size = UDim2.new(0.6, 0, 0.2, 0)
    speedFrame.Position = UDim2.new(0.2, 0, 0.4, 0)
    speedFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
    speedFrame.Active = true

    local dragArea = Instance.new("TextLabel")
    dragArea.Text = "‚ö° –°–ö–û–†–û–°–¢–¨ (—Ç–∞—â–∏—Ç–µ)"
    dragArea.Size = UDim2.new(1, 0, 0.3, 0)
    dragArea.BackgroundColor3 = Color3.fromRGB(45, 45, 55)
    dragArea.TextColor3 = Color3.new(1, 0.5, 0)
    dragArea.Font = Enum.Font.GothamBold
    dragArea.TextScaled = true

    local slider = Instance.new("Frame")
    slider.Size = UDim2.new(0.9, 0, 0.2, 0)
    slider.Position = UDim2.new(0.05, 0, 0.5, 0)
    slider.BackgroundColor3 = Color3.fromRGB(60, 60, 70)
    slider.BorderSizePixel = 0

    local fill = Instance.new("Frame")
    fill.Size = UDim2.new(0.5, 0, 1, 0)
    fill.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
    fill.BorderSizePixel = 0
    fill.Parent = slider

    local valueText = Instance.new("TextLabel")
    valueText.Text = "–°–∫–æ—Ä–æ—Å—Ç—å: 1.0x"
    valueText.Size = UDim2.new(1, 0, 0.3, 0)
    valueText.Position = UDim2.new(0, 0, 0.7, 0)
    valueText.BackgroundTransparency = 1
    valueText.TextColor3 = Color3.new(1, 1, 1)
    valueText.Font = Enum.Font.Gotham
    valueText.TextScaled = true

    -- –°–ë–û–†–ö–ê
    dragArea.Parent = speedFrame
    slider.Parent = speedFrame
    valueText.Parent = speedFrame
    speedFrame.Parent = gui

    -- –ü–ï–†–ï–¢–ê–°–ö–ò–í–ê–ù–ò–ï
    EnableMobileDrag(dragArea)

    -- –°–õ–ê–ô–î–ï–† –î–õ–Ø –¢–ï–õ–ï–§–û–ù–ê
    slider.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Touch then
            local touchStartX = input.Position.X
            local startFillSize = fill.Size
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.Change then
                    local deltaX = input.Position.X - touchStartX
                    local newWidth = math.clamp(startFillSize.X.Scale + (deltaX / slider.AbsoluteSize.X), 0, 1)
                    fill.Size = UDim2.new(newWidth, 0, 1, 0)
                    
                    local speed = math.clamp(newWidth * 5, 0.1, 5)
                    valueText.Text = string.format("–°–∫–æ—Ä–æ—Å—Ç—å: %.1fx", speed)
                    
                    local humanoid = Players.LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                    if humanoid then
                        humanoid.WalkSpeed = 16 * speed
                    end
                end
            end)
        end
    end)

    speedGui = gui
    return gui
end

-- –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–ô –ó–ê–ü–£–°–ö --
task.spawn(function()
    task.wait(2)
    mainGui = CreateMainMenu()
    ShowNotification("üì± –ú–µ–Ω—é –∑–∞–≥—Ä—É–∂–µ–Ω–æ! –¢–∞—â–∏—Ç–µ –∑–∞ –≤–µ—Ä—Ö–Ω—é—é —á–∞—Å—Ç—å", Color3.fromRGB(0, 100, 200))
end)

print("–ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ!")
